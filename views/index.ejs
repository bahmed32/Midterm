<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Meta Information -->
  <title>TODO</title>
  <!-- Always use this line to make it work for all platforms -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>To-Do List</title>
  <script src="https://apis.google.com/js/api.js"></script>
  <script src="/home/labber/midterm/routes/google_api_helper.js"></script>
</head>
<body>
  <nav>
    <span>Welcome Alice Wu</span>
    <div class="right-align">
      <span></span>
      <i class="fa-solid fa-angles-down"></i>
    </div>
  </nav>
  <div style="text-align: center; margin-top: 50px;">
    <div>
      <h2>To-Do List</h2>
      <input type="text" id="todo-input" placeholder="Add a to-do">
      <button onclick="execute()">Submit</button>
    </div>
    <div>
      <div>
        <h3>List 1</h3>
      </div>
      <div>
        <h3>List 2</h3>
      </div>
    </nav>
  <div class="container mt-5">
      <h1 class="text-center mb-4">Smart To-Do List</h1>

      <!-- To Do Form -->
      <form id="toDoForm" class="mb-4">
          <div class="mb-3">
              <label for="taskInput" class="form-label">New Task</label>
              <input type="text" class="form-control" id="taskInput" required>
          </div>
          <button type="submit" class="btn btn-primary">Add Task</button>
      </form>

      <div class="row">
          <!-- Categories -->
          <div class="col-md-3">
              <div class="card">
                  <div class="card-header bg-primary text-white">
                      To Eat
                  </div>
                  <ul class="list-group list-group-flush" id="toEatList">
                      <!-- To Eat items will be dynamically added here -->
                  </ul>
              </div>
          </div>

          <div class="col-md-3">
              <div class="card">
                  <div class="card-header bg-success text-white">
                      To Read
                  </div>
                  <ul class="list-group list-group-flush" id="toReadList">
                      <!-- To Read items will be dynamically added here -->
                  </ul>
              </div>
          </div>

          <div class="col-md-3">
              <div class="card">
                  <div class="card-header bg-warning">
                      To Watch
                  </div>
                  <ul class="list-group list-group-flush" id="toWatchList">
                      <!-- To Watch items will be dynamically added here -->
                  </ul>
              </div>
          </div>

          <div class="col-md-3">
              <div class="card">
                  <div class="card-header bg-secondary text-white">
                      To Buy
                  </div>
                  <ul class="list-group list-group-flush" id="toBuyList">
                      <!-- To Buy items will be dynamically added here -->
                  </ul>
              </div>
          </div>
      </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
      document.getElementById('toDoForm').addEventListener('submit', function (event) {
          event.preventDefault();

          const taskInput = document.getElementById('taskInput').value;
          const category = categorizeTask(taskInput);
          const listItem = createListItem(category, taskInput);
          document.getElementById(`${category}List`).appendChild(listItem);

          // Clear the input field
          document.getElementById('taskInput').value = '';
      });

      function categorizeTask(task) {
          // Add logic to categorize the task based on its description
          const taskLowercase = task.toLowerCase();

          if (taskLowercase.includes('eat')) {
              return 'toEat';
          } else if (taskLowercase.includes('read')) {
              return 'toRead';
          } else if (taskLowercase.includes('watch')) {
              return 'toWatch';
          } else if (taskLowercase.includes('buy')) {
              return 'toBuy';
          } else {
              // Default to 'toDo' if no specific category is determined
              return 'toDo';
          }
      }

      function createListItem(category, task) {
          const listItem = document.createElement('li');
          listItem.className = 'list-group-item d-flex justify-content-between align-items-center';
          listItem.innerHTML = `
              ${task}
              <span class="badge bg-danger">Delete</span>
          `;

          return listItem;
      }

      // Add event listener for deleting tasks
      document.body.addEventListener('click', function (event) {
          if (event.target.classList.contains('badge')) {
              event.target.parentElement.remove();
          }
      });
  </script>

  </body>
  </html>
